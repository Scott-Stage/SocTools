using System;
using System.ServiceModel.Syndication;
using System.Xml;

public class ParseAtomSvc
{
    public static string GetMetadataUrl(string atomsvcUrl)
    {
        using (XmlReader reader = XmlReader.Create(atomsvcUrl))
        {
            Atom10FeedFormatter formatter = new Atom10FeedFormatter();
            formatter.ReadFrom(reader);

            foreach (SyndicationLink link in formatter.Feed.Links)
            {
                if (link.RelationshipType == "service.metadata")
                {
                    return link.Uri.AbsoluteUri;
                }
            }
        }

        return null; // Metadata URL not found
    }

    public static void Main(string[] args)
    {
        string atomsvcUrl = "http://yourserver/yourservice.atomsvc";  // Replace with your URL
        string metadataUrl = GetMetadataUrl(atomsvcUrl);

        if (metadataUrl != null)
        {
            Console.WriteLine("Metadata URL: " + metadataUrl);
            // Use metadataUrl to generate client proxy or inspect service details.
        }
        else
        {
            Console.WriteLine("Could not find service metadata URL.");
        }
    }
}