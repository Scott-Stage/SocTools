// Helper function to copy text to clipboard
function copyToClipboard(text, button) {
  if (navigator.clipboard) {
    navigator.clipboard.writeText(text)
      .then(() => {
        button.textContent = 'Copied!';
        setTimeout(() => {
          button.textContent = 'Copy'; // Reset button text after a short delay
        }, 1500); // Reset after 1.5 seconds
      })
      .catch(err => {
        console.error('Failed to copy text: ', err);
        alert('Failed to copy URL to clipboard. Please copy manually.');
      });
  } else {
    // Fallback for browsers that don't support Clipboard API (older browsers)
    fallbackCopyToClipboard(text, button);
  }
}

// Fallback copy to clipboard for older browsers
function fallbackCopyToClipboard(text, button) {
  const textArea = document.createElement("textarea");
  textArea.value = text;

  // Avoid scrolling to bottom
  textArea.style.top = "0";
  textArea.style.left = "0";
  textArea.style.position = "fixed";

  document.body.appendChild(textArea);
  textArea.focus();
  textArea.select();

  try {
    const successful = document.execCommand('copy');
    if (successful) {
      button.textContent = 'Copied!';
      setTimeout(() => {
        button.textContent = 'Copy';
      }, 1500);
    } else {
      alert('Failed to copy URL to clipboard. Please copy manually (Ctrl+C / Cmd+C).');
    }
  } catch (err) {
    console.error('Fallback copy failed: ', err);
    alert('Failed to copy URL to clipboard. Please copy manually.');
  }

  document.body.removeChild(textArea);
}