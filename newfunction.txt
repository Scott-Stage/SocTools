// wwwroot/js/sessionStorageInterop.js

// This function is correct and needs no changes.
window.saveToSessionStorage = (key, value) => {
    try {
        const jsonValue = JSON.stringify(value);
        sessionStorage.setItem(key, jsonValue);
    } catch (e) {
        console.error("Failed to save to session storage", e);
    }
};

// CORRECTED VERSION of readFromSessionStorage
// We remove JSON.parse. The function now just returns the raw string.
window.readFromSessionStorage = (key) => {
    try {
        // Just get the raw string value from session storage.
        // Let the C# code handle the parsing.
        return sessionStorage.getItem(key);
    } catch (e) {
        console.error("Failed to read from session storage", e);
        return null;
    }
};